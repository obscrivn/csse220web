<!DOCTYPE html>
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>CSSE 220</title>
    <link rel="icon" type="image/x-icon" href="favicon.ico">
<link rel="stylesheet" type="text/css" href="../syllabus_files/schedule.css">
<link rel="stylesheet" type="text/css" href="../syllabus_files/screen.css">
<style>

body {
          font-family: Arial, sans-serif;
          line-height: 1.5;
          margin: 0;
          padding: 1rem;
          background: #f5f7fa;
          color: #333;
        }
        
        /* Section containers */
        section {
          background: #fff;
          border: 1px solid #ddd;
          border-radius: 6px;
          box-shadow: 0 2px 4px rgba(0,0,0,0.05);
          margin: 1.5rem 0;
          padding: 1.2rem;
        }
        
        /* Headings */
        h2 {
          margin-top: 0;
          font-size: 1.6rem;
          border-bottom: 2px solid #e0e0e0;
          padding-bottom: 0.3rem;
        }
        h3 {
          font-size: 1.3rem;
          margin-top: 1rem;
        }
        
        /* Image styling */
        section img {
          display: block;
          max-width: 100%;
          height: auto;
          margin: 0.8rem auto;
          border: 1px solid #ccc;
          border-radius: 4px;
        }
        
        /* Code blocks */
        /* pre {
          background: #2d2d2d;
          color: #f8f8f2;
          padding: 0.8rem;
          border-radius: 1px;
          overflow-x: auto;
          font-family: "Courier New", Courier, monospace;
          font-size: 0.9rem;
        } */
        /* pre code {
          display: block;
          white-space: pre-wrap;
          word-wrap: break-word;
        } */
        
        /* Inline code */
        /* code {
          background: #eaeaea;
          color: #c7254e;
          padding: 0.2rem 0.4rem;
          border-radius: 1px;
          font-family: "Courier New", Courier, monospace;
          font-size: 0.95em;
        } */
        
        /* Highlight compile / runtime state */
        strong + span {
          font-weight: bold;
          color: #d14;
        }
        
        /* Lists */
        ul, ol {
          margin: 0.5rem 0 0.5rem 1.2rem;
        }
        li {
          margin-bottom: 0.5rem;
        }
        
        /* Method call subsections */
        section#method-calls h4 {
          margin: 1rem 0 0.3rem;
          font-size: 1.1rem;
          color: #444;
          border-left: 3px solid #007acc;
          padding-left: 0.5rem;
        }
        
        /* Emphasis for compile/run status */
        span[style*="darkred"] {
          font-weight: bold;
          color: #c00;
        }



    /* body {
      font-family: Arial, sans-serif;
      margin: 20px;
      background-color: #f5f5f5;
    } */
    #main-content {
      padding: 20px;
    }
/* Header styling */
#header {
        position: fixed;
        top: 0;
      left: 0;
      right: 0;
      z-index: 1000;
    }
    #header a {
      color: #fff;
      margin-right: 15px;
      text-decoration: none;

    }
    #header a:hover {
      text-decoration: underline;
    }
    #header div {
      clear: both;
    }
    /* Content container */
    #content {
      padding: 20px;
      margin-top: 100px; 
      margin-bottom: 50px;
    } 
    
    .lab-section {
      background-color: #fff;
      border: 1px solid #ccc;
      padding: 15px;
       scroll-margin-top: 80px;
      margin-bottom: 20px;
      border-radius: 5px;
      box-shadow: 2px 2px 5px rgba(0,0,0,0.1);
    }
    .lab-section h2 {
      border-bottom: 2px solid #ddd;
      padding-bottom: 5px;
      color: #333;
    }
    .lab-section p {
      line-height: 1.5;
      color: #555;
    }

/* Lab Navigation Menu Styling */
#lab-nav {
      background-color: #faf9fc;
      padding: 10px;
      margin-bottom: 20px;
      border: 1px solid #ccc;
      border-radius: 5px;
      overflow-x: auto;  /* Enables horizontal scroll */
      white-space: nowrap; /* Prevents wrapping */
    }
    #lab-nav ul {
      list-style: none;
      padding: 0;
      margin: 0;
      display: flex;
      gap: 15px;
    }
    #lab-nav ul li a {
      text-decoration: none;
      color: #333;
      margin-left: 20px;
      padding: 5px 10px;
      border-radius: 3px;
    }
    #lab-nav ul li a:hover {
      background-color: #ddd;
    }
    code {
        color: red;
    }
    .code-window {
      background-color: #272822;
      color: #f8f8f2;
      border: 1px solid #333;
      padding: 10px;
      font-family: Consolas, "Courier New", monospace;
      white-space: pre;
      overflow-x: auto;
      border-radius: 3px;
      margin-top: 10px;
    }
    .solution-window {
      background-color: #e8f5e9;
      color: #2e7d32;
      border: 1px solid #4caf50;
      padding: 10px;
      font-family: Consolas, "Courier New", monospace;
      border-radius: 3px;
      overflow-x: auto;
      white-space: pre;
      margin-top: 10px;
    }
    .solution-header {
      font-weight: bold;
      margin-bottom: 5px;
      color: #2e7d32;
    }

    a.resource-ref {
  background-color: #444; /* dark background for contrast */
  color: #61dafb;         /* bright text color */
  padding: 4px 8px;
  border-radius: 4px;
  text-decoration: none;
  transition: background-color 0.2s ease;
}

a.resource-ref:hover {
  background-color: #555;
  color: #ffffff;
}
pre code {
  background-color: #f5f7fa;
  color: #1a1a1a;
  border-left: 4px solid #4a90e2;
  padding: 0.75em;
  display: block;
  border-radius: 6px;
  font-size: 0.9em;
  line-height: 1.4em;
}
pre code:hover {
  background-color: #dce1e8;
  border-left-color: #28527a;
}
.hint summary{cursor:pointer;font-weight:700}
    /* .hint{border:1px dashed #d7dff0;border-radius:12px;padding:.6rem .9rem;background:#fafcff;margin:.8rem 0} */
    .pill{display:inline-block;padding:.2rem .55rem;border-radius:999px;background:#eef1ff;color:#3b3f66;font-size:.85rem;margin-right:.4rem}
    .todo li{margin:.45rem 0}
    .topbtn{position:fixed;right:14px;bottom:14px;background:#222;color:#fff;border:0;border-radius:999px;padding:.6rem .9rem;cursor:pointer}
    .footnotes{color:var(--muted);font-size:.95rem}
  </style>
</head>
<body>
  <div id="header">
    <a id="index_link" href="../index.html">CSSE 220</a>
    <a id="syllabus_link" href="../syllabus.html">Syllabus</a>
    <a id="schedule_link" href="../schedule.html">Schedule</a>
    <a id="quiz_link" href="../worksheets.html">Quizzes</a>
    <a id="quiz_link" href="../labs.html">Labs</a>
    <a id="quiz_link" href="../homework.html">Homework</a>
    <a id="quiz_link" href="../exams.html">Exams</a>
    <a id="quiz_link" href="../project.html">Final Project</a>
    <a id="resources_link" href="../resources.html">Resources</a>
    <div style="clear:both;"></div>
</div>
<div id="content">
<!-- <div id="content"> -->
    <h1>Lab Assignment 18</h1>
    <nav id="lab-nav">
        <ul>
          <li><a href="#lab1">01. Ball Model</a></li>
          <li><a href="#lab2">02. ImageIO (Sprites)</a></li>
          <li><a href="#lab3">03. Collision</a></li>

      
         
          <!-- Add more lab links as needed -->
        </ul>
      </nav>
<!-- Lab Navigation Menu -->
<!-- <div id="main-content"> -->
 <!-- <section>
  <p>Resources 1: <a href="../resources.html#events" target="_blank" class="resource-ref">Events</a></p>
  <p>Resources 2: <a href="../resources.html#listener" target="_blank" class="resource-ref">Understanding Listener with getActionCommand()</a></p>
  <p>Resources 3: <a href="../resources.html#focus" target="_blank" class="resource-ref">How to keep focus on Frame for events</a></p>

</section>-->
<p>Submission: 1) BallModel, GameComponent, Ball</p>
<div id="main-content">

    <div class="lab-section" id="lab1">
      <h2>üì¶ Starter Project & Assets</h2>
<ol>
  <li>Download the provided <b>starter ZIP</b> (refactored code) <a href="./BallApp.zip"   target="_blank" class="resource-ref">here</a>.</li>
  <li><b>Eclipse import:</b> <em>File ‚Üí Import ‚Üí Existing Projects into Workspace ‚Üí Select archive file</em>. 
    
  <li>Download  <a href = "./tennis.png" target="_blank" class="resource-ref"><code>tennis.png</code></a> and place it at the <b>package level</b> with <code>Ball.java</code> (same folder/package).</li>
</ol>
    <h2 style="color:black">01. BallModel Refactoring</h2>
    <p><b>Goal:</b> Move the list and ‚Äúupdate all balls‚Äù logic into a tiny model class. Keep your existing timer inside <code>GameComponent</code> for now so behavior doesn‚Äôt change.</p>

<h3>1.1 Create <code>BallModel</code></h3>
<pre><code class="language-java">import java.util.ArrayList;
import java.util.List;

public class BallModel {
    // Keep it simple for this lab: public so the view can read it directly.
    public List&lt;Ball&gt; balls = new ArrayList&lt;&gt;();

    public void addBall(int x, int y) {
        balls.add(new Ball(x, y));
    }

    public void updateAll(int width, int height) {
        for (Ball b : balls) {
          b.move(width, height); 
        }
    }
}
</code></pre>
<h3>1.2 Update <code>GameComponent</code> to use the model</h3>
<pre><code class="language-java">import javax.swing.*;
import java.awt.*;

public class GameComponent extends JComponent {
   //... existing code
   //New
    private final BallModel model = new BallModel();
    private final Timer timer;

    public GameComponent() {
        setPreferredSize(new Dimension(WIDTH,HEIGHT));

        // seed a couple balls so you see something immediately
        model.addBall(100, 100);
        model.addBall(220, 70);

        timer = new Timer(30, e -&gt; {
            model.updateAll(WIDTH, HEIGHT);
            repaint();
        });
    }

    // Expose simple helpers so panel keys/buttons can keep the same logic:
    public void start() { timer.start(); }
    public void stop()  { timer.stop();  }
    public void addBall(int x, int y) { 
      model.addBall(x, y); //NEW
      repaint(); 
    }

    @Override
    protected void paintComponent(Graphics g) {
        super.paintComponent(g);
        Graphics2D g2 = (Graphics2D) g;
        g2.setColor(FG);
			  g2.drawLine(x1, y1, x2, y2);
        for (Ball b : model.balls) { //NEW
          b.draw(g2); 
        } 
    }
}
</code></pre>
<details class="hint">
  <summary>üí° Why is this better design?</summary>
  <p><b>Model</b> (BallModel) owns the data &amp; updates; <b>View</b> (GameComponent) just draws. 
     Timer can stay in the component for now, but in the future consider moving it in GamePanel. 
     Benefit: collisions can live cleanly in <code>BallModel</code> without touching paint code.</p>
</details>
</div>
<div class="lab-section" id="lab2">
<h2>02. Add a Sprite (Image)</h2>

<ol>
  <li>Place <code>tennis.png</code> in the <b>same package</b> as <code>Ball.java</code>.</li>
  <li>Load with <code>ImageIO.read(Ball.class.getResource("tennis.png"))</code> (works from classpath).</li>
  <li>Try/Catch: if loading fails, draw a circle so the game still works.</li>
</ol>

<pre><code class="language-java">import java.awt.*;
import java.awt.image.BufferedImage;
import java.io.IOException;
import javax.imageio.ImageIO;

public class Ball {
    int x, y;
    int dx = 3, dy = 2;
    int radius = 15;
    Color color = Color.RED;
    private BufferedImage sprite; //new
    private boolean spriteLoaded = false;//new

    public Ball(int x, int y) {
        this.x = x; this.y = y;
        try {
            sprite = ImageIO.read(Ball.class.getResource("tennis.png"));
            spriteLoaded = (sprite != null);
        } catch (IOException | IllegalArgumentException ex) {
            spriteLoaded = false; // fallback to oval
        }
    }

    public void draw(Graphics2D g2) {
       if (spriteLoaded) {   // new
    		int drawX = x - radius; 
    	    int drawY = y - radius;
    	    int size = radius * 2;
    	    g2.drawImage(sprite, drawX, drawY, size, size, null);
    	} else {
        g2.setColor(color);
        g2.fillOval(x - radius, y - radius, radius * 2, radius * 2);
    	}
    }
}
</code></pre>
  <details class="hint">
  <summary>üí° I put the image next to <code>src</code>. Can I use <code>ImageIO.read("tennis.png")</code>?</summary>
  <p>Prefer <code>getResource()</code> with the image in the same package as <code>Ball.java</code>. 
     Plain file paths can break when exporting JARs or running on different machines.</p>
</details>
</div>
<div class="lab-section" id="lab3">
<h2>03. Collision</h2>
<h3>Part 1. Wall Bouncing</h3>

<p>Use center + radius checks. Reverse the corresponding velocity. Work with Ball class</p>
<pre><code class="language-java">public void move(int width, int height) {
    x += dx;
    y += dy;

    // Left/right
    if (x - radius &lt; 0) { x = radius; dx = -dx; }
    else if (x + radius &gt; width) { x = width - radius; dx = -dx; }

    // Top/bottom
    if (y - radius &lt; 0) { y = radius; dy = -dy; }
    else if (y + radius &gt; height) { y = height - radius; dy = -dy; }
}
</code></pre>
<details class="hint">
  <summary>üí° It looks like there‚Äôs a tiny gap at the bottom?</summary>
  <p>That‚Äôs integer drawing vs. pixel edges. 
     If you want a visual buffer, tweak the <em>draw</em> size/offset, not the collision math.</p>
</details>


<h3>Part 2. Ball‚ÄìBall Bouncing (Cartoonish Physics)</h3>

<p>Detect overlap and do a simple response. Start with ‚Äúswap velocities‚Äù and add a tiny separation to avoid sticking.</p>

<p>In <code>BallModel.updateAll()</code></p>
<pre><code class="language-java">public void updateAll(int w, int h) {
    for (Ball b : balls) b.move(w, h); // wall bounces live in Ball.move()
    handleCollisions();                 // simple ball‚Äìball bounces
}
</code></pre>

<p>Add <code>handleCollisions()</code> (BallModel)</p>
<pre><code class="language-java">private void handleCollisions() {
    for (int i = 0; i &lt; balls.size(); i++) {
        for (int j = i + 1; j &lt; balls.size(); j++) {
            Ball a = balls.get(i), b = balls.get(j);

            int dx = a.x - b.x, dy = a.y - b.y;
            int rSum = a.r + b.r;

            if (dx*dx + dy*dy &lt;= rSum*rSum) {
                // 1) swap velocities (equal-mass cartoon bounce)
                    a.dx = -a.dx; a.dy = -a.dy;
                     b.dx = -b.dx; b.dy = -b.dy;

                // 2) nudge apart one step along their new directions
                a.x += Integer.signum(a.dx); a.y += Integer.signum(a.dy);
                b.x += Integer.signum(b.dx); b.y += Integer.signum(b.dy);
            }
        }
    }
}
</code></pre>

<details class="hint">
  <summary>üí° They sometimes ‚Äústick‚Äù or jitter after colliding?</summary>
  <p>That‚Äôs normal in discrete updates. Add a quick <b>separation</b> before swapping speeds, 
     or a 1‚Äì2 frame <b>cooldown</b> per ball pair, or only resolve when moving toward each other. 
     For this lab, the tiny nudge shown above is usually enough.</p>
</details>

<h2>üß™ Checkpoints</h2>
<ul>
  <li>Refactor compiles; timer still animates.</li>
  <li>Sprite shows if <code>tennis.png</code> is present; circle fallback otherwise.</li>
  <li>Balls bounce off all 4 walls using radius checks.</li>
  <li>Balls bounce off each other using simple swap + nudge.</li>
</ul>
</div>

</body>
</html>