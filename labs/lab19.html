<!DOCTYPE html>
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>CSSE 220</title>
    <link rel="icon" type="image/x-icon" href="favicon.ico">
<link rel="stylesheet" type="text/css" href="../syllabus_files/schedule.css">
<link rel="stylesheet" type="text/css" href="../syllabus_files/screen.css">
<style>

body {
          font-family: Arial, sans-serif;
          line-height: 1.5;
          margin: 0;
          padding: 1rem;
          background: #f5f7fa;
          color: #333;
        }
        
        /* Section containers */
        section {
          background: #fff;
          border: 1px solid #ddd;
          border-radius: 6px;
          box-shadow: 0 2px 4px rgba(0,0,0,0.05);
          margin: 1.5rem 0;
          padding: 1.2rem;
        }
        
        /* Headings */
        h2 {
          margin-top: 0;
          font-size: 1.6rem;
          border-bottom: 2px solid #e0e0e0;
          padding-bottom: 0.3rem;
        }
        h3 {
          font-size: 1.3rem;
          margin-top: 1rem;
        }
        
        /* Image styling */
        section img {
          display: block;
          max-width: 100%;
          height: auto;
          margin: 0.8rem auto;
          border: 1px solid #ccc;
          border-radius: 4px;
        }
        
        /* Code blocks */
        /* pre {
          background: #2d2d2d;
          color: #f8f8f2;
          padding: 0.8rem;
          border-radius: 1px;
          overflow-x: auto;
          font-family: "Courier New", Courier, monospace;
          font-size: 0.9rem;
        } */
        /* pre code {
          display: block;
          white-space: pre-wrap;
          word-wrap: break-word;
        } */
        
        /* Inline code */
        /* code {
          background: #eaeaea;
          color: #c7254e;
          padding: 0.2rem 0.4rem;
          border-radius: 1px;
          font-family: "Courier New", Courier, monospace;
          font-size: 0.95em;
        } */
        
        /* Highlight compile / runtime state */
        strong + span {
          font-weight: bold;
          color: #d14;
        }
        
        /* Lists */
        ul, ol {
          margin: 0.5rem 0 0.5rem 1.2rem;
        }
        li {
          margin-bottom: 0.5rem;
        }
        
        /* Method call subsections */
        section#method-calls h4 {
          margin: 1rem 0 0.3rem;
          font-size: 1.1rem;
          color: #444;
          border-left: 3px solid #007acc;
          padding-left: 0.5rem;
        }
        
        /* Emphasis for compile/run status */
        span[style*="darkred"] {
          font-weight: bold;
          color: #c00;
        }



    /* body {
      font-family: Arial, sans-serif;
      margin: 20px;
      background-color: #f5f5f5;
    } */
    #main-content {
      padding: 20px;
    }
/* Header styling */
#header {
        position: fixed;
        top: 0;
      left: 0;
      right: 0;
      z-index: 1000;
    }
    #header a {
      color: #fff;
      margin-right: 15px;
      text-decoration: none;

    }
    #header a:hover {
      text-decoration: underline;
    }
    #header div {
      clear: both;
    }
    /* Content container */
    #content {
      padding: 20px;
      /* margin-top: 100px;  */
      margin-bottom: 50px;
      padding-top: 100px;
    }
    #section {
margin-top: 1rem; 
margin-bottom: 1rem;
padding: 20px;
} 
    .lab-section {
      background-color: #fff;
      border: 1px solid #ccc;
      padding: 15px;
      margin-bottom: 20px;
      border-radius: 5px;
      box-shadow: 2px 2px 5px rgba(0,0,0,0.1);
    }
    .lab-section h2 {
      border-bottom: 2px solid #ddd;
      padding-bottom: 5px;
      color: #333;
    }
    .lab-section p {
      line-height: 1.5;
      color: #555;
    }
/* Lab Navigation Menu Styling */
#lab-nav {
      background-color: #faf9fc;
      padding: 10px;
      margin-bottom: 20px;
      border: 1px solid #ccc;
      border-radius: 5px;
      overflow-x: auto;  /* Enables horizontal scroll */
      white-space: nowrap; /* Prevents wrapping */
    }
    #lab-nav ul {
      list-style: none;
      padding: 0;
      margin: 0;
      display: flex;
      gap: 15px;
    }
    #lab-nav ul li a {
      text-decoration: none;
      color: #333;
      margin-left: 20px;
      padding: 5px 10px;
      border-radius: 3px;
    }
    #lab-nav ul li a:hover {
      background-color: #ddd;
    }
    code {
        color: red;
    }
    .code-window {
      background-color: #272822;
      color: #f8f8f2;
      border: 1px solid #333;
      padding: 10px;
      font-family: Consolas, "Courier New", monospace;
      white-space: pre;
      overflow-x: auto;
      border-radius: 3px;
      margin-top: 10px;
    }
    .solution-window {
      background-color: #e8f5e9;
      color: #2e7d32;
      border: 1px solid #4caf50;
      padding: 10px;
      font-family: Consolas, "Courier New", monospace;
      border-radius: 3px;
      overflow-x: auto;
      white-space: pre;
      margin-top: 10px;
    }
    .solution-header {
      font-weight: bold;
      margin-bottom: 5px;
      color: #2e7d32;
    }

    a.resource-ref {
  background-color: #444; /* dark background for contrast */
  color: #61dafb;         /* bright text color */
  padding: 4px 8px;
  border-radius: 4px;
  text-decoration: none;
  transition: background-color 0.2s ease;
}

a.resource-ref:hover {
  background-color: #555;
  color: #ffffff;
}

pre code {
  background-color: #f5f7fa;
  color: #1a1a1a;
  border-left: 4px solid #4a90e2;
  padding: 0.75em;
  display: block;
  border-radius: 6px;
  font-size: 0.9em;
  line-height: 1.4em;
}
pre code:hover {
  background-color: #dce1e8;
  border-left-color: #28527a;
}
.lab-card {
  margin: 0 0 1rem 0;
  border-radius: 0.75rem;
  border: 1px solid #ddd;
  background: #fff;
  padding: 0.25rem 0.75rem 0.75rem;
}

.lab-card > summary {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  list-style: none;
  cursor: pointer;
  padding: 0.5rem 0;
  font-weight: 600;
}

.lab-card > summary::-webkit-details-marker {
  display: none; /* hide default arrow in some browsers */
}

.lab-card > summary::after {
  content: "›";
  margin-left: auto;
  font-size: 1rem;
  transition: transform 0.15s ease-out;
}

.lab-card[open] > summary::after {
  transform: rotate(90deg);
}

.lab-label {
  font-family: monospace;
  opacity: 0.7;
}

.lab-title {
  font-weight: 700;
}

.lab-tag {
  font-size: 0.8rem;
  padding: 0.1rem 0.4rem;
  border-radius: 999px;
  border: 1px solid #ccc;
  background: #fff;
}

.lab-body {
  border-top: 1px solid #e0e0e0;
  margin-top: 0.25rem;
  padding-top: 0.5rem;
}

details.hint {
  margin-top: 0.5rem;
  padding: 0.5rem;
  background: #f9f9f9;
  border-left: 3px solid #aaa;
}

details.hint > summary {
  cursor: pointer;
  font-weight: 500;
  color: #555;
}
  </style>
</head>
<body>
  <div id="header">
    <a id="index_link" href="../index.html">CSSE 220</a>
    <a id="syllabus_link" href="../syllabus.html">Syllabus</a>
    <a id="schedule_link" href="../schedule.html">Schedule</a>
    <a id="quiz_link" href="./design-principles.html">Design</a>
    <a id="quiz_link" href="../labs.html">Labs</a>
    <a id="quiz_link" href="../homework.html">Homework</a>
    <a id="quiz_link" href="../exams.html">Exams</a>
    <a id="quiz_link" href="../project.html">Final Project</a>
    <a id="resources_link" href="../resources.html">Resources</a>
    <div style="clear:both;"></div>
</div>
<section id="content">
<!-- <div id="content"> -->
    <h1>Lab Assignment 19</h1>
    <nav id="lab-nav">
        <ul>
    <li><a href="#lab1">01. File IO Levels</a></li>
          <li><a href="#lab1">02. File IO Score</a></li>


      
         
          <!-- Add more lab links as needed -->
        </ul>
      </nav>
      <section>
<!-- Lab Navigation Menu -->
<!-- <div id="main-content"> -->

<div class="lab-section" id="lab1">
<!-- <div class="lab-section" id="lab1"> -->
  <!-- <section id="lab1"> -->
<h2>Lab: Exceptions + Loading Levels + Scanner (Game Dev)</h2>
<p>You may reuse your Ball Lab project as the starting point for this lab.
For Part 1, you do NOT need to change the animation loop or physics.
Treat the Ball as the player and focus only on loading and validating a level from a file.</p>
  <div class="callout">
    <p><b>Goal:</b> Build a real "final-project-ish" feature: load a level from a text file, handle failures gracefully, then add a player name via <code>Scanner</code> and display it on the HUD.</p>
    <p><b>Deliverables:</b> Demo + Your code</p>
  </div>


<details class="lab-card" open>
  <summary>Part 1: Load a Level File and Place the Ball (Scanner + Exceptions)</summary>

  <div class="callout">
    <p><b>Goal:</b> Read a text file level (ASCII grid), translate characters, and use it to set the Ball’s starting position. That’s it. No collisions. No enemies. No fancy game logic.</p>
    <p><b>What you will demonstrate:</b> Scanner file reading + validating characters + handling missing files.</p>
  </div>

  <h3>1) Create the level file</h3>
  <p>In Eclipse: Right-click your project → <b>New → File</b> → name it <code>level1.txt</code>.</p>
  <p><b>Place the file directly at the same level as <code>src</code></b> (not inside a Java package).</p>

  <p>Paste this sample level:</p>
  <pre><code>***E***
*P...E*
*******</code></pre>

  <p><b>Legend:</b></p>
  <ul>
    <li><code>P</code> = Ball start location (exactly one)</li>
    <li><code>*</code> = wall tile (we will not use collisions yet)</li>
    <li><code>E</code> = enemy tile (ignore for Part 1; just treat as a tile)</li>
    <li><code>.</code> or space = empty tile</li>
  </ul>


  <h3>Step 2: Read the level file - DrawingComponent</h3>
  <p>Scan and Read the file before you create Ball() instance in the constructor</p>

  <pre><code>
    File file = new File("level1.txt");
    Scanner scanner = new Scanner(file);
  </code></pre>
  <p> Add try/catch</p>
    try {
  Scanner scanner = new Scanner(file);
  while (scanner.hasNextLine()) {
    String line = scanner.nextLine();
    System.out.println(line);
  }

  scanner.close();
} catch (FileNotFoundException e) {
  System.out.println("level1.txt not found");
}</code></pre>

<h3>Step 3: Read the characters</h3>

<p>
After you confirm the file can be read, update your code to examine
<b>each character</b> in the level file.
</p>

<p>
Use a nested loop:
</p>
<ul>
  <li>The <code>while</code> loop reads each line (row)</li>
  <li>The <code>for</code> loop reads each character in the line (column)</li>
</ul>

<pre><code>int row = 0;

Scanner scanner = new Scanner(new File("level1.txt"));
while (scanner.hasNextLine()) {
  String line = scanner.nextLine();

  for (int col = 0; col < line.length(); col++) {
    char c = line.charAt(col);

    if (c == 'P') {
	      System.out.println(c);
	      
  }
  }

  row++;
}

scanner.close();
</code></pre>



<h3>Step 4: Extract the position</h3>

<p>
Use the row and column where the character <code>P</code> appears to compute
the Ball’s starting position.
</p>

<p>
Convert grid coordinates to pixel coordinates using a tile size.
</p>

<pre><code>// Example tile size (pixels)
final int TILE_SIZE = 200;

// Inside the nested row/column loop
if (c == 'P') {
  int x = col * TILE_SIZE;
  int y = row * TILE_SIZE;


}
</code></pre>

  <h3>Step 5: Update Field in Drawing component</h3>
  <p>Add x and y variables</p>
<pre><code>int startX = 80;
int startY = 100;</code></pre>
<h3>Update the ball object</h3>
<p>Place the ball after your scanned the level file to incorporate the change</p>
<pre><code>ball = new Ball(startX,startY,14);</code></pre>
</details></div><!-- </section> -->
<!-- <div class="lab-section" id="lab2">

    <h2 style="color:black">1. File IO in swing</h2>
    <p>Objective: create a Game panel that stores and displays the scores and save them locally</p>


            <h3>1. Fields</h3>
            <pre><code>private int score = 0;
private JLabel scoreLabel = new JLabel("Score: 0");
private JButton addPointButton = new JButton("Add Point");
private JButton endGameButton = new JButton("End Game");</code></pre>
            <ul>
              <li><strong>score</strong>: holds the current game score (model state)</li>
              <li><strong>scoreLabel</strong>: displays the score to the user (view)</li>
              <li><strong>addPointButton</strong>: when clicked, increases the score</li>
              <li><strong>endGameButton</strong>: when clicked, ends the game, saving/loading scores</li>
            </ul>

          

            <h3>2. Constructor &amp; Layout</h3>
            <pre><code>public GamePanel() {
   setLayout(new FlowLayout());
   scoreLabel.setFont(scoreLabel.getFont().deriveFont(24f));
   add(scoreLabel);
  add(addPointButton);
  add(endGameButton);
          
  addPointButton.addActionListener(e -> addScores());
  endGameButton.addActionListener(e -> onEndGame());
}</code></pre>
            <ul>
              
              <li><code>deriveFont(24f)</code>: makes the score text larger and more visible</li>
              
            </ul>

          
            <h3>3. Incrementing the Score</h3>
            <pre><code>private void addScores() {
            score++;
            scoreLabel.setText("Score: " + score);
          }</code></pre>
            <ul>
              <li>Increase <code>score</code> by one</li>
              <li>Update the label so the view matches the model</li>
            </ul>

          
            <h3>4. Ending the Game</h3>
            <pre><code>private void onEndGame() {
            String player = JOptionPane.showInputDialog(this, "Enter your name", "Player");
            if (player == null || player.isBlank()) player = "Anonymous";
          
            ScoreManager.saveScore(player, score);
            showLeaderboard();
          
            score = 0;
            scoreLabel.setText("Score: 0");
          }</code></pre>
            <ul>
 
              <li>Defaults to “Anonymous” if they cancel or enter nothing.</li>
              <li><code>ScoreManager.saveScore(...)</code>: appends the name and score to a file (will create later)</li>
              <li><code>showLeaderboard()</code>: reads and displays top scores (will create later)</li>
              <li>Resets <code>score</code> and label for a fresh new game</li>
            </ul>

            <h3>5. Displaying the Leaderboard</h3>
            <pre><code>private void showLeaderboard() {
            List<String> lines = ScoreManager.loadScores();
              StringBuilder html = new StringBuilder(
                "&lt;html&gt;&lt;h2&gt;Leaderboard&lt;/h2&gt;&lt;ol&gt;"
            );
            for (int i = 0; i &lt; lines.size() && i &lt; 5; i++) {
              String line = lines.get(i);
                String[] parts = line.split(",", 2);
                html.append("&lt;li&gt;")
                    .append(parts[0])    // player name
                    .append(": ")
                    .append(parts[1])    // score
                    .append("&lt;/li&gt;");
            }
            html.append("&lt;/ol&gt;&lt;/html&gt;");
          
            JOptionPane.showMessageDialog(
              this,
              new JLabel(html.toString()),
              "Top Scores",
              JOptionPane.PLAIN_MESSAGE
            );
          }</code></pre>
            <ul>
              <li><code>ScoreManager.loadScores()</code>: returns raw “name,score” lines from the file</li>
              <li><code>StringBuilder + HTML</code>: builds a simple ordered list for Swing’s <code>JLabel</code></li>
              <li><code style="color:black">showMessageDialog</code>: shows the leaderboard in a modal dialog</li>
              <li style="color:black">Limits to top 5 entries</li>
            </ul>
            <h3 style="color:black">ScoreManager</h3>
            <p>
              The ScoreManager class handles all file I/O related to persisting and retrieving game scores
              It exposes two static methods:
            </p>
            <ol>
              <li><code style="color:red">saveScore(String player, int score)</code></li>
              <li><code style="color:red">loadScores()</code></li>
            </ol>
          
            <h3>1. File Path Constant</h3>
            <pre><code style="color:red">
          private static final String SCORES_FILE = "scores.txt";
            </code></pre>
            <ul>
              <li><strong>Why a constant?</strong> Centralizes the filename so if you ever change where scores are saved, you update in one place</li>
              <li><strong>Relative path:</strong> The file lives in the working directory (usually your project root or wherever the JVM was launched)</li>
            </ul>
          
            <h3>2. Saving a Score</h3>
            <pre><code style="color:red">
          public static void saveScore(String player, int score) {
              try (PrintWriter out = 
                       new PrintWriter(
                         new FileWriter(SCORES_FILE, true)  // append mode
                       )
                 ) {
                  out.println(player + "," + score);
              } catch (IOException e) {
                  System.err.println("Error saving score: " + e.getMessage());
              }
          }
            </code></pre>
            <ul>
              <li><strong>Append mode:</strong> <code style="color:red">new FileWriter(SCORES_FILE, true)</code> opens the file without erasing existing lines</li>
              <li><strong>PrintWriter:</strong> wraps the <code style="color:red">FileWriter</code> to provide <code style="color:red">println(...)</code> convenience</li>
              <li><strong>Try block</strong> ensures <code style="color:red">out.close()</code> is called automatically, flushing and releasing the file handle</li>
              <li><strong>Exception handling:</strong> any <code style="color:red">IOException</code> (disk full, permission denied) is caught and logged to <code style="color:red">System.err</code> without crashing the game</li>
            </ul>
          
            <h3>3. Loading Scores</h3>
            <pre><code style="color:red">
          public static List&lt;String&gt; loadScores() {
              List&lt;String&gt; lines = new ArrayList&lt;&gt;();
              File file = new File(SCORES_FILE);
              if (!file.exists()) {
                  return lines;  // no scores file yet,  return empty list
              }
          
              try (BufferedReader in = 
                       new BufferedReader(new FileReader(file))
                 ) {
                  String line;
                  while ((line = in.readLine()) != null) {
                      lines.add(line.trim());
                  }
              } catch (IOException e) {
                  System.err.println("Error loading scores: " + e.getMessage());
              }
          
              return lines;
          }
            </code></pre>
            <ul>
              <li><strong>Return type:</strong> <code style="color:red">List&lt;String&gt;</code> where each element is a line in <code style="color:red">"player,score"</code> format</li>
              <li><strong>Existence check:</strong> <code style="color:red">if (!file.exists())</code> avoids a <code style="color:red">FileNotFoundException</code> on first run</li>
              <li><strong>BufferedReader:</strong> efficient line-by-line reading, auto-closed by try block</li>
              <li><strong>Trim:</strong> <code style="color:red">line.trim()</code> removes stray whitespace before/after each line</li>
              <li><strong>Error handling:</strong> logs I/O errors but returns whatever lines were successfully read (or an empty list)</li>
            </ul>
          
            <h3>4. How to Use in Your GamePanel</h3>
            <pre><code style="color:red">
          // Save a new score:
          ScoreManager.saveScore(playerName, currentScore);
          
          // Later, display leaderboard:
          List<String> allLines = ScoreManager.loadScores();
          // split each "player,score" line in your UI code...
            </code></pre> -->
          
            <h3>5. Best Practices</h3>
            <ul>
              <li><strong>Single Responsibility:</strong> File I/O is isolated in ScoreManager; your UI code does not need to know the details</li>
              <li><strong>Robustness:</strong> All exceptions are caught and reported; the game continues even if the disk is full or the file is missing</li>
              <li><strong>Maintainability:</strong> Using constants and standard Java I/O patterns makes the code easy to understand and update</li>
            </ul>
          </section>

        </body>
        </html>